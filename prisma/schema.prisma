// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

datasource db {
  provider     = "mysql"
  url          = env("DATABASE_URL")
  // shadowDatabaseUrl = env("SHADOW_DATABASE_URL")
  relationMode = "prisma"
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id       Int     @id @default(autoincrement())
  email    String  @unique
  username String?
  password String

  contas      Contas[]
  Lancamentos Lancamentos[]
}

model Lancamentos {
  id        Int      @id @default(autoincrement())
  tipo      String
  descricao String
  valor     Decimal
  data      DateTime

  contaId Int
  conta   Contas @relation(fields: [contaId], references: [id])

  categoriaId Int
  categoria   Categorias @relation(fields: [categoriaId], references: [id])

  userId Int
  user   User @relation(fields: [userId], references: [id])

  @@index([userId])
  @@index([categoriaId])
  @@index([contaId])
}

model Contas {
  id         Int      @id @default(autoincrement())
  conta      String
  tipo       String
  saldo      Decimal? @default(0)
  fechamento Int?
  vencimento Int?

  userId Int
  user   User @relation(fields: [userId], references: [id])

  lancamentos Lancamentos[]

  @@index([userId])
}

model Categorias {
  id        Int    @id @default(autoincrement())
  categoria String
  icon      String

  lancamentos Lancamentos[]
}
